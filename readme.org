#+TITLE: ChatGPT Userscript

* What this is
=basic.js= is a userscript for =https://chatgpt.com/*= that helps with:
- repeated message sending with delay
- bulk clicking image download buttons

* Install
1. Install a userscript manager (Tampermonkey/Violentmonkey).
2. Create a new script and paste =basic.js=.
3. Open =https://chatgpt.com/=.

* Quick use (browser console)
The script exposes helpers on =window=:
- =sendMessage(msg, checkInterval, sleep, timeout)=
- =sendMessageRepeatedly(msg, n, sleep, mode)=
- =sendMessageRepeatedlyArray(msgs, sleep, sep, prefix, postfix, from, to, mode)=
- =sendMessageRepeatedlyArrayChooseFile(sleep, sep, prefix, postfix, from, to, mode)=
- =openNewChat()=
- =clickDallEDownloadButtons()=

Examples:
#+begin_src js
sendMessage("Hello");
sendMessageRepeatedly("Thanks, continue.", n=2, sleep=60,);
sendMessageRepeatedlyArrayChooseFile(sleep=10, sep="\n", prefix="", postfix="", from=0, to=0, mode="new_chat_image");
clickDallEDownloadButtons();
#+end_src

* Notes
- =sleep= in =sendMessageRepeatedly= is in seconds.
- =timeout= in =sendMessage= is in seconds.
- =mode= defaults to =continuous=.
- =mode="new_chat_image"= waits for a visible image download button, clicks it, opens a new chat, then sends the next prompt.
- =to= is an exclusive end index in array helpers.
- =to= defaults to =0=, and =to=0= maps to end-of-array (send all items from =from=).
- Download helper targets current image download button attributes.
- Downloader click throttling is built in: after every 10 download clicks, it waits 1.1 seconds before continuing.
- =clickDallEDownloadButtons()= may require manually scrolling to the top of the chat so target image download buttons are present/visible.

* Maintenance
For adapting to upstream ChatGPT UI changes with MCP, see:
=docs/update_userscript.md=

** [[id:e8a38273-a5de-4a50-bbab-ada9fcdf01f8][Connecting to a running Chrome instance]]
The [[./.codex/config.toml][MCP config]] requires Chrome to be running with the remote debugging port set to 9222. It also mandates the installation of both NVM and Node v22.

*macOS*

#+begin_src :eval never
/Applications/Google\ Chrome.app/Contents/MacOS/Google\ Chrome --remote-debugging-port=9222 --user-data-dir=/tmp/chrome-profile-stable
#+end_src

*Linux*

#+begin_src :eval never
/usr/bin/google-chrome --remote-debugging-port=9222 --user-data-dir=/tmp/chrome-profile-stable
#+end_src

*Windows*

#+begin_src :eval never
"C:\Program Files\Google\Chrome\Application\chrome.exe" --remote-debugging-port=9222 --user-data-dir="%TEMP%\chrome-profile-stable"
#+end_src
